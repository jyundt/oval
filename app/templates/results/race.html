{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Results{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Results for {{ race.date.strftime('%m/%d/%Y') }} </h1>
</div>
<h2>Class: {{ race.race_class.name}}</h2>
<div class="table-responsive">
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Place</th>
<th>Name</th>
<th>Team</th>
<th>Points</th>
<th>Team Points</th>
<th>Primes</th>
</tr>
</thead>
<tbody>
{% for participant in participants  %}
<tr>
{% if participant.result.place is not none %}
<td> {{ participant.result.place }}</td>
{% else %}
<td>-</td>
{%endif%}
<td><a href="{{url_for('results.racer_results', id=participant.racer.id)}}">{{ participant.racer.name }}</a></td>
{%if participant.team.name is not none %}
<td>{{ participant.team.name }}</td>
{%else%}
<td>-</td>
{%endif%}
{% if participant.result.points is not none %}
<td> {{ participant.result.points }}</td>
{% else %}
<td>-</td>
{%endif %}
{% if participant.result.team_points is not none %}
<td> {{ participant.result.team_points }}</td>
{% else %}
<td>-</td>
{%endif %}
{%if participant.primes|length ==0 %}
{#<button type="button" class="btn" data-toggle="popover" title="test" data-content="test content">Button</button> #}
<td></td>
{%else%}
<td><button type="button" class="btn btn-sm" data-container="body" data-toggle="popover" title="Primes - {{participant.racer.name}}" data-content="{% for prime in participant.primes %}{{prime.name}}{%endfor%}"><span class="glyphicon glyphicon-plus"></span></button></td> 
{% endif %}
</tr>
{% endfor %}
</tbody>
</table>
</div>
{# this is some clunky code to get popups to work #}
{# disabling the popovers
{%block scripts %}
{{ super() }}
<script>
$(document).ready(function(){
    $('[data-toggle="popover"]').popover(); 
});
</script>

{% endblock %}
#}

{% endblock %}
