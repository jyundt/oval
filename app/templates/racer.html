{% extends "base.html" %}

{% block title %}Racers{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Racers</h1>
{% if current_user.is_authenticated %}
<a class="btn btn-default" href="{{url_for('main.racer_add')}}"><span class="glyphicon glyphicon-plus"></span> Add a racer</a>
{% endif %}
<a class="btn btn-default" href="{{url_for('main.racer_search')}}"><span class="glyphicon glyphicon-search"></span> Racer search</a>
</div>

<div class="table-responsive">
<table class="table table-striped table-bordered">
<thead>
<tr>
    <th>Name</th>
    <th>Team</th>
</tr>
</thead>
<tbody>
{% for racer in racers %}
<tr>
<td><a href="{{url_for('main.racer_details',id=racer.id)}}">{{ racer.name}}</a>
{%if racer.strava_id%}
<style>
  .strava-badge- { display: inline-block; height: 24px;}
  .strava-badge- img { visibility: hidden; height: 24px; }
  .strava-badge-:hover { background-position: 0 -37px; }
  .strava-badge-follow { height: 24px; width: 24px; background: url(//badges.strava.com/echelon-sprite-24.png) no-repeat 0 0; }
</style>
<a href="http://strava.com/athletes/{{racer.strava_id}}/badge" class="strava-badge- strava-badge-follow" target="_blank"><img src="//badges.strava.com/echelon-sprite-24.png" alt="Strava" /></a>
{%endif%}
</td> 
{%if racer.current_team %}
<td><a href="{{url_for('main.team_details',id=racer.current_team.id)}}">{{racer.current_team.name}}</a></td>
{%else%}
<td></td>
{%endif%}
</tr>
{% endfor %}
</tbody>
</table>
</div>
{% endblock %}
